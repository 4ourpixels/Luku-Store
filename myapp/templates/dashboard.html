{% extends 'base.html' %} {% load static %} {% block body %}
<div id="top" class="container mt-3">
  <div class="container-fluid">
    <h1 class="text-center display-1">Dashboard</h1>
    <div class="align-items-center d-flex justify-content-center">
      <ul class="nav nav-pills">
      <li class="nav-item">
        <a class="nav-link text-dark" href="{% url 'add' %}">Add Product</a>
      </li>
      <li class="nav-item">
        <a class="nav-link text-dark" href="{% url 'store' %}">Store</a>
      </li>
      <li class="nav-item">
        <a class="nav-link text-dark" href="{% url 'gallery' %}">Category</a>
      </li>
      <li class="nav-item">
        <a class="nav-link text-dark" href="/admin">Admin</a>
      </li>
      <li class="nav-item">
        <a class="nav-link text-dark" href="{% url 'gallery' %}">Category</a>
      </li>
      <li><a class="nav-link active bg-dark" href="{% url 'logout' %}">Log Out {{ user.username }}</a></li>
    </ul>
    </div>
    <hr />
    <div class="row">
      <main class="col ms-sm-auto px-md-4">
        <div class="row">
          <h3>Products Overview</h3>
          <div class="col">
            <canvas
            class="my-3"
            id="myChart2"
            ></canvas>
          </div>
          <div class="col">
            <canvas
              class="my-3"
              id="myChart"
              height="300px"
            ></canvas>
          </div>
        </div>
        <hr>
        <hr>
        <h2>Product Database</h2>
        <div class="table-responsive">
          <table class="table table-striped table-sm">
            <thead>
              <tr>
                <th scope="col">ID</th>
                <th scope="col">Product</th>
                <th scope="col">Category</th>
                <th scope="col">Type</th>
                <th scope="col">Price</th>
                <th scope="col">Color</th>
                <th scope="col">Brand</th>
                <th scope="col">Size</th>
                <th scope="col">Rating</th>
              </tr>
            </thead>
            <tbody>
                {% for photo in photos %}
              <tr>
                <td>{{ photo.pk }}</td>
                <td>{{ photo.name }}</td>
                <td>{{ photo.category }}</td>
                <td>{{ photo.type }}</td>
                <td>{{ photo.price }}</td>
                <td>{{ photo.colors }}</td>
                <td>{{ photo.shop }}</td>
                <td>{{ photo.size }}</td>
                <td>{{ photo.rating }}</td>
              </tr>
              {% endfor %}
              </tr>
            </tbody>
          </table>
        </div>
        <!-- Newsletter Subscriptions -->
        <hr>
        <h2>Newsletter Subscriptions</h2>
        <div class="table-responsive">
          <table class="table table-striped table-sm">
            <thead>
              <tr>
                <th scope="col">Email</th>
              </tr>
            </thead>
            <tbody>
                {% for newsletter in newsletters %}
              <tr>
                <td>{{ newsletter.email }}</td>
              </tr>
              {% endfor %}
              </tr>
            </tbody>
          </table>
        </div>

        {% if shipping %}
        
        <!-- Shipping Addresses -->
        <hr>
        <h2>Shipping Addresses</h2>
        <div class="table-responsive">
          <table class="table table-striped table-sm">
            <thead>
              <tr>
                <th scope="col">Label</th>
                <th scope="col">Details</th>
                <th scope="col">City</th>
              </tr>
            </thead>
            <tbody>
                {% for shipping in shippings %}
              <tr>
                <td>{{ shipping.label }} Address</td>
                <td>{{ shipping.order }}</td>
                <td>{{ shipping.city }}</td>
              </tr>
              {% endfor %}
              </tr>
            </tbody>
          </table>
        </div>
        {% endif %}
        
      </main>
    </div>
  </div>
  <div class="text-center">
    <a style="text-decoration: none;" class="text-dark" href="#top">Back to Top</a>
  </div>
</div>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>


<script>
  const ctx = document.getElementById('myChart');
  
  // Parse the JSON data from the server
  const categoryList = JSON.parse('{{ category_json|escapejs }}');
  
  new Chart(ctx, {
    type: 'bar',
    data: {
      labels: categoryList,
      datasets: [{
        label: 'Category',
        data: [0, 8, 0, 1, 0, 4, 2, 0, 0, 5, 2, 3, 9, 1],
        borderWidth: 1
      }]
    },
    options: {
      responsive: true,
      scales: {
        y: {
          beginAtZero: true
        }
      }
    }
  });
</script>
<script>
  const ctx2 = document.getElementById('myChart2');

  // let popularProducts = JSON.parse('{{ popular_number }}');
  // let regularProducts = JSON.parse('{{ regular_products }}');

  // let popularData = [popularProducts, regularProducts]
  let popularProducts = 13;
  let regularProducts = 64;

  let popularData = [popularProducts, regularProducts]


  new Chart(ctx2, {
    type: 'pie',
    data: {
      labels: ['Popular Products', 'Other Products'],
      datasets: [{
        data: popularData,
        borderWidth: 1
      }]
    },
    
  });
</script>
{% endblock %}
