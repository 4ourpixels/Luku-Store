{% extends 'base.html' %}{% load static %} {% block body %}

<section id="top" class="container mt-3">
  <div class="row my-3">
    <ul class="nav nav-tabs justify-content-center">
      <li class="nav-item">
        <a
          class="nav-link {% if not active_category %}active{% endif %} text-black"
          style="text-decoration: none"
          aria-current="page"
          href="{% url 'shop' %}"
          >All</a
        >
      </li>
      {% for category in categories %}
      <li class="nav-item">
        <a
          class="nav-link {% if active_category == category.name %}active{% endif %} text-black"
          style="text-decoration: none"
          href="{% url 'gallery' %}?category={{ category.name }}"
          >{{ category.name }}</a
        >
      </li>
      {% endfor %}
    </ul>
  </div>

  <div
    class="row gx-4 gx-lg-5 row-cols-2 row-cols-md-4 row-cols-xl-4 justify-content-center"
  >
    {% for photo in photos %}
    <div class="col mb-5">
      <div class="card-wrapper mb-4">
        <div class="card-img">
          <img
            class="card-img-top"
            src="{{ photo.image.url }}"
            alt="{{ photo.name }}"
          />
        </div>
        <div class="card-body">
          <button
            style="background: none; border: none; height: 4rem"
            data-product="{{ photo.pk }}"
            data-action="add"
            class="update-cart rounded-circle px-3 bg-white"
            onmouseover="toggleDim(this, true)"
            onmouseout="toggleDim(this, false)"
          >
            <i class="text-black fa-solid fa-2xl fa-cart-arrow-down"></i>
          </button>
        </div>
      </div>
      <div class="text-start">
        <a
          href="{% url 'photo' photo.id %}"
          class="text-black fw-bold underline my-2"
          >{{ photo.name }}</a
        >
        <br />
        <small class="small">{{ photo.description|truncatechars:25 }}</small>
        <br />
        <h6 class="text-black my-2">â‚¬{{ photo.price }}</h6>
      </div>
    </div>
    {% endfor %}
  </div>
  <hr />
  <div class="text-center my-4">
    <a href="{% url 'shop' %}" class="btn btn-dark">Back to shop</a>
  </div>

  <script>
    function toggleDim(button, dim) {
      var cardWrapper = button.closest(".card-wrapper");
      if (dim) {
        cardWrapper.classList.add("dim");
      } else {
        cardWrapper.classList.remove("dim");
      }
    }
  </script>
</section>
{% endblock %}
